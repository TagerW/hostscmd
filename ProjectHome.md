# Hosts Commander #
Данная программа призвана максимально облегчить работу с файлом hosts из консоли. Если вы любите консоль, и вам приходится время от времени забирался в глубину системных директорий, чтобы что-то изменить в этом файле — Hosts Commander точно придётся вам по душе.

## Ссылки ##
  * [Обсуждение на форуме автора](http://phpbbex.com/forum/viewtopic.php?t=214)
  * [Анонс первой версии на Хабре](http://habrahabr.ru/post/109180/)
  * [Анонс версии с поддержкой Linux на Хабре](http://habrahabr.ru/post/132963/)

## Возможности ##
  * Операции добавления, удаления, отключения и скрытия хостов<br>
<ul><li>Отображение хостов из hosts по маске<br>
</li><li>Операции над хостами по маске<br>
</li><li>Создание резервных копий hosts и откат последней операции<br>
</li><li>Поддержка IDN (позволяет работать с русскими доменами, которые в файле hosts хранятся в виде xn--)<br>
</li><li>Поддержка IPv6 адресов<br>
</li><li>Поддержка алиасов (несколько доменных имён в строке)<br>
</li><li>Сохранение исходного оформления и кодировки файла hosts<br>
</li><li>Большое количество алиасов для каждой команды (кому как удобнее)<br>
</li><li>Встроенный командный интерпретатор для тесной работы с hosts<br>
</li><li>Поддерживает работу под Windows XP/Vista/7 (.NET 3.5), Linux и Mac OS X (Mono 2.8+)<br></li></ul>

<h2>Как этим пользоваться?</h2>
В Windows можно предварительно скопировать файл программы в системную директорию (c:\windows\system32\), после чего утилита всегда будет готова к работе в консоли или по нажатию Win+R. Для работы в Windows XP и Vista необходимо установить <a href='http://www.microsoft.com/download/en/details.aspx?id=22'>.NET Framework 3.5</a>. В Windows 7 для запуска командного интерпретатора hosts.exe (запуск без параметров) достаточно дать добро UAC, однако для корректного отображения результата работы прямого вызова команд (вне встроенного командного интерпретатора) hosts.exe необходимо запускать из консоли с правами администратора. Чтобы быстро запустить такую консоль, нажмите клавишу Win (откроется пуск), в строку поиска введите cmd и нажмите Ctrl+Shift+Enter. Если же запускать команды из консоли без прав администратора, hosts.exe будет запускаться в отдельном консольном окне, а по окончанию работы будет сразу закрываться.<br>
<br>
Для запуска не под Windows необходимо использовать Mono. Mono входит в состав многих дистрибутивов Linux (например, Ubuntu), в остальных случаях его не сложно установить. Работа программы тестировалась на Mono версии 2.8. Выполнение приложения производится командой вида: <code>mono hosts.exe command param1 param2</code>. В отличие от запуска под Windows, приложение не требует прав суперпользователя для операций, не связанных с изменением файла hosts.<br>
<br>
<code>hosts</code><br>
— Запускает командный интерпретатор для тесной работы с <code>hosts</code><br>
— В этом режиме все описанные ниже команды следует вводить без <code>hosts</code><br>
— Для выхода можно использовать команды <code>exit</code> и <code>quit</code><br>

<code>hosts view [all] &lt;mask&gt;</code><br>
— Без параметров отображает только включённые и не скрытые хосты<br>
— С флагом all также отображает отключённые и скрытые<br>
— Алиасы: <code>list, select, ls</code><br>
— Пример: <code>view vk</code>
— Пример: <code>view all local*</code><br>

<code>hosts add &lt;host&gt; &lt;aliases&gt; &lt;addr&gt; # &lt;comment&gt;</code><br>
— Добавляет новый хост, <code>&lt;addr&gt;</code> по умолчанию 127.0.0.1<br>
— Парамер <code>&lt;aliases&gt;</code> может отсутствовать<br>
— Параметры до # могут иметь произвольный порядок<br>
— Всё что после # — комментарий<br>
— Алиасы: <code>new</code><br>
— Пример: <code>hosts add myhost.dev www.myhost.dev</code><br>
— Пример: <code>hosts add another.dev 192.168.1.1 # Remote host</code><br>
— Пример: <code>hosts add домен.рф # IDN host demo</code>

<code>hosts upd &lt;host|mask&gt; &lt;addr&gt; # &lt;comment&gt;</code><br>
— Обновляет IP адрес и комментарий хоста<br>
— Всё что после # — комментарий<br>
— Алиасы: <code>update, change</code><br>
— Пример: <code>hosts upd myhost.dev # new comment</code><br>
— Пример: <code>hosts upd another.dev 192.168.1.1</code>

<code>hosts set &lt;host|mask&gt; &lt;addr&gt; # &lt;comment&gt;</code><br>
— Добавляет хост или обновляет его IP адрес и комментарий<br>
— Гибрид add и upd<br>
— Всё что после # — комментарий<br>
— Пример: <code>hosts set myhost.dev # new comment</code><br>
— Пример: <code>hosts set another.dev 192.168.1.1</code>

<code>hosts rem &lt;host|mask&gt;</code><br>
— Удаляет конкретный хост или соответствующие маске<br>
— Алиасы: <code>rm, del, remove, delete</code><br>
— Пример: <code>hosts rem *.local</code>

<code>hosts enable &lt;host|mask&gt;</code><br>
— Включает конкретный хост или соответствующие маске<br>
— Алиасы: <code>on</code><br>
— Пример: <code>hosts enable localhost</code>

<code>hosts disable &lt;host|mask&gt;</code><br>
— Выключает конкретный хост или соответствующие маске<br>
— Алиасы: <code>off</code><br>
— Пример: <code>hosts disable local?ost</code>

<code>hosts print</code><br>
— Выводит оригинальное содержимое файла hosts<br>
— Алиасы: <code>raw, file</code>

<code>hosts format</code><br>
— Форматирует строки в файле<br>
<br>
<code>hosts clean</code><br>
— Удаляет комментарии и форматирует строки в файле<br>
<br>
<code>hosts backup &lt;name&gt;</code><br>
— Делает резервную копию файла hosts<br>
— Параметр <code>&lt;name&gt;</code> не обязателен, по умолчанию он — backup<br>
<br>
<code>hosts restore &lt;name&gt;</code><br>
— Восстанавливает файл hosts из резервной копии<br>
— Параметр <code>&lt;name&gt;</code> не обязателен, по умолчанию он — backup<br>
<br>
<code>hosts rollback</code><br>
— Откатывает последнюю операцию с файлом hosts<br>
<br>
<code>hosts empty</code><br>
— Создаёт новый hosts файл с одним хостом — localhost<br>
— Алиасы: <code>recreate</code>

<code>hosts open</code><br>
— Открывает файл hosts в текстовом редакторе, ассоциированным с .txt<br>
— Команда доступна только в Windows<br>
<br>
<code>hosts hide &lt;host|mask&gt;</code><br>
— Прячет хосты из списка при запуске <code>hosts view</code><br>
— Пригодится, если у вас много хостов, которые не хотелось бы всегда видеть перед глазами<br>
<br>
<code>hosts show &lt;host|mask&gt;</code><br>
— Возвращает хосты в <code>hosts view</code>

<h2>История изменений</h2>

<b><code>v1.6.0 [26.10.2013]</code></b>
<ul><li>Команда add автоматически удаляет все предыдущие вхождения добавляемых хостов<br>
</li><li>Команда upd может только обновлять существующие записи<br>
</li><li>Команда set может как обновлять существующие записи, так и добавлять новые<br>
</li><li>Команды add, set и upd позволяют добавлять или обновлять одновременно IPv4 и IPv6 адреса за один запуск<br>
</li><li>Нормализация IPv6 адресов, автоматическое приведение к компактному виду<br>
</li><li>Команда recreate переименована в empty<br>
</li><li>Для команды view добавлен алиас ls<br>
</li><li>Другие незначительные изменения</li></ul>

<b><code>v1.5.1 [19.11.2011]</code></b>
<ul><li>Решена проблема при считывании команд в режиме командного интерпретатора под Mono<br>
</li><li>У команды rem появился алиас rm</li></ul>

<b><code>v1.5 [17.11.2011]</code></b>
<ul><li>Поддержка запуска под Mono на Linux и Mac OS X<br>
</li><li>Право записи в директорию с файлом hosts требуют только команды, изменяющие его содержимое<br>
</li><li>Возможность откатить (rollback) операцию recreate</li></ul>

<b><code>v1.4.1 [24.10.2011]</code></b>
<ul><li>В командном интерпретаторе набранный по ошибке префикс hosts игнорируется<br>
</li><li>Обновлён вывод команды help</li></ul>

<b><code>v1.4 [20.10.2011]</code></b>
<ul><li>Встроенный командный интерпретатор, который запускается при вызове hosts без параметров<br>
</li><li>Команда hosts open открывает hosts в программе, ассоциированной с .txt<br>
</li><li>Команда hosts view упрощена, по умолчанию отображает только включённые и не скрытые хосты</li></ul>

<b><code>v1.3 [06.02.2011]</code></b>
<ul><li>Поддержка IDN (можно создавать русскоязычные домены)<br>
</li><li>Поддержка IPv6 адресов<br>
</li><li>Поддержка алиасов (несколько доменных имён в строке)<br>
</li><li>Новая операция rollback для отмены работы последней команды<br>
</li><li>add и set — разные команды (добавление и обновление соответственно)<br>
</li><li>Команда add сама догадывается о порядке параметров, всё что после # — комментарий<br>
</li><li>Возможность создавать несколько резервных копий hosts, задавая имя копии</li></ul>

<b><code>v1.2 [03.12.2010]</code></b>
<ul><li>Программа требует для запуска администраторские права<br>
</li><li>Сохраняется исходная кодировка hosts (актуально для русских Windows)<br>
</li><li>Возможность создания стандартного hosts файла (recreate)</li></ul>

<b><code>v1.1 [01.12.2010]</code></b>
<ul><li>Совместимость с .NET 3.5<br>
</li><li>Автоматическая резервная копия файла hosts при первом запуске<br>
</li><li>Возможность создания резервной копии (backup) и восстановления (restore)<br>
</li><li>Возможность быстро открыть файл hosts в блокноте</li></ul>

<b><code>v1.0 [30.11.2010]</code></b>
<ul><li>Первая версия, написана полностью на C# для .NET 4.0<br>
</li><li>Операции добавления, удаления, отключения хостов<br>
</li><li>Сохранение исходного оформления файла hosts<br>
</li><li>Возможность скрытия заданных хостов при стандартном просмотре<br>
</li><li>Операции над хостами по маске<br>
</li><li>Простые выборки из hosts по атрибутам и маске (view)<br>
</li><li>Большое количество алиасов для каждой команды (кому как удобнее)<br>
</li><li>Реализованы все идеи, кроме групп и профилей</li></ul>

<b><code>v0.1 [22.07.2009]</code></b>
<ul><li>Technical Preview на C++<br>
</li><li>Продумана общая концепция программы<br>
</li><li>Так и не была реализована до конца</li></ul>

<b><code>v0.0 [28.01.2009]</code></b>
<ul><li>Оформлена идея программы и сразу же отправлена в «долгий ящик»